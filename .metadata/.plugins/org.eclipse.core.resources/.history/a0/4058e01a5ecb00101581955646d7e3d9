server.port=8082
eureka.client.service-url.defaultZone=http://localhost:8761/eureka
spring.data.mongodb.uri=mongodb://localhost:27017/Transaction


# =====================================================
# FEIGN + CIRCUIT BREAKER
# (Enables Feign to use Spring Cloud CircuitBreaker -> Resilience4j)
# =====================================================
feign.circuitbreaker.enabled=true
logging.level.com.util.feign=DEBUG
logging.level.feign.client=DEBUG
logging.level.org.springframework.cloud.openfeign=DEBUG

# =====================================================
# CIRCUIT BREAKER CONFIG (accountServiceCB)
# =====================================================
resilience4j.circuitbreaker.instances.accountServiceCB.registerHealthIndicator=true
resilience4j.circuitbreaker.instances.accountServiceCB.failureRateThreshold=50
resilience4j.circuitbreaker.instances.accountServiceCB.slowCallRateThreshold=50
resilience4j.circuitbreaker.instances.accountServiceCB.waitDurationInOpenState=5s
resilience4j.circuitbreaker.instances.accountServiceCB.permittedNumberOfCallsInHalfOpenState=3
resilience4j.circuitbreaker.instances.accountServiceCB.slidingWindowType=COUNT_BASED
resilience4j.circuitbreaker.instances.accountServiceCB.slidingWindowSize=10
resilience4j.circuitbreaker.instances.accountServiceCB.minimumNumberOfCalls=5
resilience4j.circuitbreaker.instances.accountServiceCB.slowCallDurationThreshold=2000ms
resilience4j.circuitbreaker.instances.accountServiceCB.recordExceptions=com.exceptions.AccountNotFoundException

# =====================================================
# RETRY CONFIG (accountServiceRetry)
# =====================================================
resilience4j.retry.instances.accountServiceRetry.maxAttempts=3
resilience4j.retry.instances.accountServiceRetry.waitDuration=500ms
resilience4j.retry.instances.accountServiceRetry.enableExponentialBackoff=true
resilience4j.retry.instances.accountServiceRetry.exponentialBackoffMultiplier=2
resilience4j.retry.instances.accountServiceRetry.retryExceptions=feign.RetryableException,feign.FeignException


# =====================================================
# TIME LIMITER (MUST use same name: accountServiceCB)
# =====================================================
resilience4j.timelimiter.instances.accountServiceCB.timeoutDuration=3s
